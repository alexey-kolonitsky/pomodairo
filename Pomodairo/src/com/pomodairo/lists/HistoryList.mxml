<?xml version="1.0"?>
<!--
  Created by akalanitski on 07.12.2016.
-->
<s:Group
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:fc="http://www.adobe.com/2006/fc">

    <fx:Script><![CDATA[
        import com.pomodairo.EmbedImages;
        import com.pomodairo.TableUtils;
        import com.pomodairo.db.Storage;
        import com.pomodairo.settings.ConfigManager;

        private var configManager:ConfigManager;
        private var db:Storage = Storage.instance;

        private function onPomsOfDayClicked(event:Event):void {
            db.getPomodorosOfDay(dateFieldPomsOfDay.selectedDate, pomodoroRangeStepper.value, String(pomodoroFilter.value));
        }

        private function initDateField(df:DateField):void {
            df.selectedDate = new Date();
        }

        public function copyTableToClipboard(title:String, data:Array):void {
            var tmpString:String = new TableUtils().getTableAsCsv(data);
            System.setClipboard(tmpString);
        }
        ]]></fx:Script>

    <!-- task list -->
    <s:List id="list"
        dataProvider="{db.pomodorosOfDayDataset}"
        top="0" right="0" bottom="32" left="0"
        contentBackgroundAlpha="0"
        borderVisible="false"
        doubleClickEnabled="true"
        itemRenderer="com.pomodairo.components.PomodoroOfDayRenderer"
        dragMoveEnabled="true" width="100%">
    </s:List>
    <s:HGroup height="32" right="0" bottom="0" left="0">
        <mx:DateField id="dateFieldPomsOfDay" initialize="initDateField(this.dateFieldPomsOfDay)"/>
        <mx:Label text="Days"/>
        <mx:NumericStepper minimum="-365" maximum="365" stepSize="1" id="pomodoroRangeStepper" value="0" width="50" maxChars="4" />
        <s:BitmapImage source="{EmbedImages.ICON_SEARCH}" width="24" height="24"/>
        <fc:AutoComplete
            id="pomodoroFilter"
            dataProvider="{db.datasetStatistics5}"
            width="132"/>
        <mx:Button id="pomsOfDay" width="32" height="32" icon="{EmbedImages.ICON_REFRESH_CLASS}"
            click="onPomsOfDayClicked(null)"/>
        <mx:Button width="32" height="32" icon="{EmbedImages.ICON_COPY_CLASS}"
            click="copyTableToClipboard('Pomodoros', db.pomodorosOfDayDataset.source)"/>
    </s:HGroup>
</s:Group>
